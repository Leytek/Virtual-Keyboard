(()=>{"use strict";const e=[{code:"Backquote",caseDown:"`",caseUp:"~"},{code:"Digit1",caseDown:"1",caseUp:"!"},{code:"Digit2",caseDown:"2",caseUp:"@"},{code:"Digit3",caseDown:"3",caseUp:"#"},{code:"Digit4",caseDown:"4",caseUp:"$"},{code:"Digit5",caseDown:"5",caseUp:"%"},{code:"Digit6",caseDown:"6",caseUp:"^"},{code:"Digit7",caseDown:"7",caseUp:"&"},{code:"Digit8",caseDown:"8",caseUp:"*"},{code:"Digit9",caseDown:"9",caseUp:"("},{code:"Digit0",caseDown:"0",caseUp:")"},{code:"Minus",caseDown:"-",caseUp:"_"},{code:"Equal",caseDown:"=",caseUp:"+"},{code:"Backslash",caseDown:"\\",caseUp:"|"},{code:"Backspace",caseDown:"←",caseUp:"←"},{code:"Tab",caseDown:"Tab",caseUp:"Tab"},{code:"KeyQ",caseDown:"q",caseUp:"Q"},{code:"KeyW",caseDown:"w",caseUp:"W"},{code:"KeyE",caseDown:"e",caseUp:"E"},{code:"KeyR",caseDown:"r",caseUp:"R"},{code:"KeyT",caseDown:"t",caseUp:"T"},{code:"KeyY",caseDown:"y",caseUp:"Y"},{code:"KeyU",caseDown:"u",caseUp:"U"},{code:"KeyI",caseDown:"i",caseUp:"I"},{code:"KeyO",caseDown:"o",caseUp:"O"},{code:"KeyP",caseDown:"p",caseUp:"P"},{code:"BracketLeft",caseDown:"[",caseUp:"{"},{code:"BracketRight",caseDown:"]",caseUp:"}"},{code:"Delete",caseDown:"Delete",caseUp:"Delete"},{code:"CapsLock",caseDown:"CapsLock",caseUp:"CapsLock"},{code:"KeyA",caseDown:"a",caseUp:"A"},{code:"KeyS",caseDown:"s",caseUp:"S"},{code:"KeyD",caseDown:"d",caseUp:"D"},{code:"KeyF",caseDown:"f",caseUp:"F"},{code:"KeyG",caseDown:"g",caseUp:"G"},{code:"KeyH",caseDown:"h",caseUp:"H"},{code:"KeyJ",caseDown:"j",caseUp:"J"},{code:"KeyK",caseDown:"k",caseUp:"K"},{code:"KeyL",caseDown:"l",caseUp:"L"},{code:"Semicolon",caseDown:";",caseUp:":"},{code:"Quote",caseDown:"'",caseUp:'"'},{code:"Enter",caseDown:"Enter",caseUp:"Enter"},{code:"ShiftLeft",caseDown:"Shift",caseUp:"Shift"},{code:"KeyZ",caseDown:"z",caseUp:"Z"},{code:"KeyX",caseDown:"x",caseUp:"X"},{code:"KeyC",caseDown:"c",caseUp:"C"},{code:"KeyV",caseDown:"v",caseUp:"V"},{code:"KeyB",caseDown:"b",caseUp:"B"},{code:"KeyN",caseDown:"n",caseUp:"N"},{code:"KeyM",caseDown:"m",caseUp:"M"},{code:"Comma",caseDown:",",caseUp:"<"},{code:"Period",caseDown:".",caseUp:">"},{code:"Slash",caseDown:"/",caseUp:"?"},{code:"ArrowUp",caseDown:"▲",caseUp:"▲"},{code:"ShiftRight",caseDown:"Shift",caseUp:"Shift"},{code:"ControlLeft",caseDown:"Ctrl",caseUp:"Ctrl"},{code:"MetaLeft",caseDown:"Win",caseUp:"Win"},{code:"AltLeft",caseDown:"Atl",caseUp:"Alt"},{code:"Space",caseDown:"Space",caseUp:"Space"},{code:"AltRight",caseDown:"Alt",caseUp:"Alt"},{code:"MetaRight",caseDown:"Win",caseUp:"Win"},{code:"ArrowLeft",caseDown:"◄",caseUp:"◄"},{code:"ArrowDown",caseDown:"▼",caseUp:"▼"},{code:"ArrowRight",caseDown:"►",caseUp:"►"},{code:"ControlRight",caseDown:"Ctrl",caseUp:"Ctrl"}],c=[{caseDown:"ё",caseUp:"Ё"},{},{caseUp:'"'},{caseUp:"№"},{caseUp:";"},{},{caseUp:":"},{caseUp:"?"},{},{},{},{},{},{caseUp:"/"},{},{},{caseDown:"й",caseUp:"Й"},{caseDown:"ц",caseUp:"Ц"},{caseDown:"у",caseUp:"У"},{caseDown:"к",caseUp:"К"},{caseDown:"е",caseUp:"Е"},{caseDown:"н",caseUp:"Н"},{caseDown:"г",caseUp:"Г"},{caseDown:"ш",caseUp:"Ш"},{caseDown:"щ",caseUp:"Щ"},{caseDown:"з",caseUp:"З"},{caseDown:"х",caseUp:"Х"},{caseDown:"ъ",caseUp:"Ъ"},{},{},{caseDown:"ф",caseUp:"Ф"},{caseDown:"ы",caseUp:"Ы"},{caseDown:"в",caseUp:"В"},{caseDown:"а",caseUp:"А"},{caseDown:"п",caseUp:"П"},{caseDown:"р",caseUp:"Р"},{caseDown:"о",caseUp:"О"},{caseDown:"л",caseUp:"Л"},{caseDown:"д",caseUp:"Д"},{caseDown:"ж",caseUp:"Ж"},{caseDown:"э",caseUp:"Э"},{caseDown:"Ввод",caseUp:"Ввод"},{},{caseDown:"я",caseUp:"Я"},{caseDown:"ч",caseUp:"Ч"},{caseDown:"с",caseUp:"С"},{caseDown:"м",caseUp:"М"},{caseDown:"и",caseUp:"И"},{caseDown:"т",caseUp:"Т"},{caseDown:"ь",caseUp:"Ь"},{caseDown:"б",caseUp:"Б"},{caseDown:"ю",caseUp:"Ю"},{caseDown:".",caseUp:","},{},{},{},{},{},{caseDown:"Пробел",caseUp:"Пробел"},{},{},{},{},{},{}];class s{#e;constructor(){this.#e=document.body}generate(){this.#e.innerHTML='<main>\n<h1>Virtual Keyboard</h1>\n<textarea rows="8" cols="30"></textarea>\n<div class="keyboard"></div>\n<p>Клавиатура создана в операционной системе Windows</p>\n<p>Для переключения языка комбинация: ctrl + alt</p>\n</main>';const c=this.#e.querySelector(".keyboard");e.forEach(((s,a)=>{c.insertAdjacentHTML("beforeend",function(c){return`<button class="key ${e[c].code}"></button>`}(a))}))}}class a{#c;#s;#a;#o;#t;#n;constructor(){this.#c=document.querySelector(".keyboard"),this.#s=document.querySelector("textarea"),this.#n=this.#s.selectionStart,this.#t=localStorage.getItem("lang")??"en",this.#i("caseDown"),this.#s.addEventListener("click",(e=>this.#r(e))),this.#c.addEventListener("mousedown",(e=>this.#p(e))),document.addEventListener("keydown",(e=>this.#d(e))),document.addEventListener("keyup",(e=>this.#D(e)))}#w(e){this.#a&&!e.getModifierState("Shift")||!this.#a&&e.getModifierState("Shift")?this.#i("caseUp"):this.#i("caseDown")}#i(s){!this.#c||s===this.#o&&localStorage.getItem("lang")===this.#t||(this.#o=s,this.#c.childNodes.forEach(((a,o)=>{const t=a;"en"===this.#t?t.textContent=e[o][s]??e[o].caseDown:t.textContent=c[o][s]??e[o][s]??e[o].caseDown})))}#p(e){"BUTTON"===e.target.nodeName&&(e.target.classList.contains("CapsLock")&&(this.#a=!this.#a,e.target.classList.toggle("active"),this.#w(e)),this.#U(e.target.innerText))}#d(e){e.getModifierState("Control")&&e.getModifierState("Alt")&&("en"===this.#t?this.#t="ru":this.#t="en"),"CapsLock"===e.code&&(this.#a=e.getModifierState("CapsLock")),this.#c.childNodes.forEach((c=>c.classList.contains(e.code)&&(e.preventDefault(),c.classList.add("active")))),this.#w(e),this.#U(e.key),localStorage.setItem("lang",this.#t)}#D(e){this.#c.childNodes.forEach((c=>c.classList.contains(e.code)&&!(c.classList.contains("CapsLock")&&this.#a)&&c.classList.remove("active"))),this.#w(e)}#r(){this.#n=this.#s.selectionStart}#U(e){let c=this.#s.value;1===e.length&&"←"!==e?(c=`${c.slice(0,this.#n)}${e}${c.slice(this.#n)}`,this.#n+=1):("←"===e||"Backspace"===e)&&this.#n>0?(c=c.slice(0,this.#n-1)+c.slice(this.#n),this.#n-=1):"Delete"===e?c=c.slice(0,this.#n)+c.slice(this.#n+1):"Tab"===e?(c=`${c.slice(0,this.#n)}\t${c.slice(this.#n)}`,this.#n+=1):"Enter"===e&&(c=`${c.slice(0,this.#n)}\n${c.slice(this.#n)}`,this.#n+=1),this.#s.value=c,this.#s.setSelectionRange(this.#n,this.#n)}}(new class{#h;#l;constructor(){this.#h=new s}run(){this.#h.generate(),this.#l=new a}}).run()})();